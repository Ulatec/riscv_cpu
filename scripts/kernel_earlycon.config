# Kernel configuration fragment for early console support
# Apply with: scripts/kconfig/merge_config.sh -m .config kernel_earlycon.config

# RISC-V C extension support (for rv32imac)
CONFIG_RISCV_ISA_C=y

# Early console and printk support
CONFIG_EARLY_PRINTK=y
CONFIG_PRINTK=y
CONFIG_PRINTK_TIME=y

# Serial 8250/16550 driver (for ns16550a UART)
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_SERIAL_8250_EARLY_CON=y
CONFIG_SERIAL_8250_NR_UARTS=1
CONFIG_SERIAL_8250_RUNTIME_UARTS=1

# Generic earlycon framework
CONFIG_SERIAL_EARLYCON=y

# OF/DT console support
CONFIG_OF_STDOUT_PATH=y
CONFIG_SERIAL_OF_PLATFORM=y

# Keep kernel messages verbose
CONFIG_CONSOLE_LOGLEVEL_DEFAULT=7
CONFIG_MESSAGE_LOGLEVEL_DEFAULT=4

# Don't need HVC (hypervisor console) - use direct UART
# CONFIG_HVC_RISCV_SBI is not set

# Initramfs/initrd support
CONFIG_BLK_DEV_INITRD=y
CONFIG_INITRAMFS_SOURCE=""
